<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AR-—Å–∫—Ä–∏–Ω—à–æ—Ç</title>

  <!-- –≤–∞—à–∏ —Å—Ç–∞—Ä—ã–µ —Å—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="spinner.css">
  <link rel="stylesheet" href="scanning.css">

  <!-- –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –ø–æ–ø-–∞–ø–æ–≤ -->
  <link rel="stylesheet" href="capture.css">

  <!-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ MindAR + A-Frame -->
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
  <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
  <script src="marker-tracker.js"></script>
</head>

<body>
  <!-- –æ–≤–µ—Ä–ª–µ–π —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
  <div id="scanning-overlay" class="hidden">
    <div class="scanning-content">
      <div class="scanning-spinner"></div>
      <div class="scanning-text">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ...</div>
    </div>
  </div>

  <!-- –æ–≤–µ—Ä–ª–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ -->
  <div id="loading-overlay">
    <div class="loading-content">
      <div class="spinner"></div>
      <div class="loading-text">–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞—à–µ –±—É–¥—É—â–µ–µ "–í–ê–£–£", –ø–æ–¥–æ–∂–¥–∏—Ç–µ</div>
    </div>
  </div>

  <!-- –∫–Ω–æ–ø–∫–∞ ¬´–°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ¬ª -->
  <button id="photoBtn" disabled>üì∏ –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ</button>

  <!-- –ø–æ–ø-–∞–ø –ø—Ä–µ–≤—å—é -->
  <div id="previewOverlay" class="hidden">
    <div id="previewBox">
      <img id="previewImg" alt="preview">
      <div>
        <button id="downloadBtn">–°–∫–∞—á–∞—Ç—å</button>
        <button id="closeBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ø–æ–ø-–∞–ø –ø–æ—Å–ª–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è -->
  <div id="afterOverlay" class="hidden">
    <div id="afterBox">
      <img id="afterImg" src="https://via.placeholder.com/400x300/007aff/ffffff?text=–°—É–ø–µ—Ä!" alt="–∑–∞—Å—Ç–∞–≤–∫–∞">
      <p> </p>
      <a href="https://souzmultpark.ru/" target="_blank">
        <button id="goParkBtn">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–µ–∞–Ω—Å—ã</button>
      </a>
      <button id="laterBtn">–í –¥—Ä—É–≥–æ–π —Ä–∞–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!</button>
    </div>
  </div>

  <!-- AR-—Å—Ü–µ–Ω–∞ (–≤–∞—à–∞) -->
  <a-scene
  mindar-image="
    imageTargetSrc: sm_3x.mind;
    maxTrack: 3;
    uiLoading: #loading-overlay;
    uiScanning: #scanning-overlay;
    uiError: no;
    deviceConstraints: {
      video: {
        width:  { ideal: 1280 },
        height: { ideal: 720  },
        facingMode: 'environment'
      }
    }"
  color-space="sRGB"
  renderer="colorManagement: true, physicallyCorrectLights"
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: false">

    <!-- –ê—Å—Å–µ—Ç—ã -->
    <a-assets>
      <img id="card" src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/card.png"/>
      <a-asset-item id="1" src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/softmind/scene.gltf"></a-asset-item>
      <a-asset-item id="2" src="cube.glb"></a-asset-item>
      <img id="Oranges" src="Images/Oranges.png"/>
      <img id="Table" src="Images/Table.png"/>
      <img id="Lariska" src="Images/Lariska.png"/>
    </a-assets>

    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

    <a-entity mindar-image-target="targetIndex: 0">
      <a-plane material="shader:flat;" src="#Lariska" position="0.4 -0.5 0" height="1" width="1" rotation="0 0 0"></a-plane>
    </a-entity>

    <!-- –ß–µ–±—É—Ä–∞—à–∫–∞ -->
    <a-entity mindar-image-target="targetIndex: 1">
      <a-entity id="gif-element" geometry="primitive: plane; height:1; width:2"
                material="shader: gif; src: url(Video.gif)" position="0 2 0" visible="true"></a-entity>
      <a-plane material="shader:flat;" src="#Oranges" position="0 -0.25 0" height="1" width="1" rotation="0 0 0"></a-plane>
    </a-entity>

    <a-entity mindar-image-target="targetIndex: 2">
      <a-plane material="shader:flat;" src="#Table" position="-0.3 -0.35 0" height="2" width="2" rotation="0 0 0"></a-plane>
    </a-entity>
  </a-scene>

  <!-- –ª–æ–≥–∏–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ -->
  <script src="capture.js"></script>
</body>
</html>